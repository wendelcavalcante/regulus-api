{"ast":null,"code":"import _regeneratorRuntime from\"/home/wendel/desen/regulus/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/wendel/desen/regulus/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"/home/wendel/desen/regulus/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/wendel/desen/regulus/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/home/wendel/desen/regulus/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/home/wendel/desen/regulus/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import{Component}from'react';import{InputText}from'primereact/inputtext';import{Password}from'primereact/password';import{Card}from'primereact/card';import{AuthDataService}from'../service/auth_api.service';import{doLogin}from'../service/auth';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=/*#__PURE__*/function(_Component){_inherits(Login,_Component);var _super=_createSuper(Login);function Login(){var _this;_classCallCheck(this,Login);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={login:\"\",senha:\"\",error:\"\"};_this.handleSignIn=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var _this$state,login,senha,token;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();_this$state=_this.state,login=_this$state.login,senha=_this$state.senha;if(!(!login||!senha)){_context.next=6;break;}_this.setState({error:\"Preencha e-mail e senha para continuar!\"});_context.next=17;break;case 6:_context.prev=6;_context.next=9;return AuthDataService.autenticar(login,senha);case 9:token=_context.sent;//await api.post(\"/sessions\", { email, password });\ndoLogin(token);//login(response.data.valor);\n//this.props.history.push(\"/app\");\n_context.next=17;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](6);_this.setState({error:\"Houve um problema com o login, verifique suas credenciais. T.T\"});console.log(_context.t0);case 17:case\"end\":return _context.stop();}},_callee,null,[[6,13]]);}));return function(_x){return _ref.apply(this,arguments);};}();return _this;}_createClass(Login,[{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/_jsx(\"div\",{className:\"card flex justify-content-center\",children:/*#__PURE__*/_jsx(Card,{title:\"Login\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"flex flex-column gap-2\",onSubmit:this.handleSignIn,children:[/*#__PURE__*/_jsxs(\"span\",{className:\"p-float-label\",children:[/*#__PURE__*/_jsx(InputText,{id:\"login\",onChange:function onChange(e){return _this2.setState({login:e.target.value});}}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"login\",children:\"Usu\\xE1rio\"})]}),/*#__PURE__*/_jsxs(\"span\",{className:\"p-float-label\",children:[/*#__PURE__*/_jsx(Password,{id:\"senha\",onChange:function onChange(e){return _this2.setState({senha:e.target.value});}}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"senha\",children:\"Senha\"})]}),/*#__PURE__*/_jsx(\"span\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Entrar\"})})]})})});}}]);return Login;}(Component);export{Login as default};","map":{"version":3,"names":["Component","InputText","Password","Card","AuthDataService","doLogin","jsx","_jsx","jsxs","_jsxs","Login","_Component","_inherits","_super","_createSuper","_this","_classCallCheck","_len","arguments","length","args","Array","_key","call","apply","concat","state","login","senha","error","handleSignIn","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","e","_this$state","token","wrap","_callee$","_context","prev","next","preventDefault","setState","autenticar","sent","t0","console","log","stop","_x","_createClass","key","value","render","_this2","className","children","title","onSubmit","id","onChange","target","htmlFor","type","default"],"sources":["/home/wendel/desen/regulus/src/components/login.js"],"sourcesContent":["import { Component } from 'react';\nimport { InputText } from 'primereact/inputtext';\nimport { Password } from 'primereact/password';\nimport { Card } from 'primereact/card';\nimport { AuthDataService } from '../service/auth_api.service';\nimport { doLogin } from '../service/auth';\n\nexport default class Login extends Component {\n    state = {\n        login: \"\",\n        senha: \"\",\n        error: \"\"\n    };\n\n    handleSignIn = async e => {\n        e.preventDefault();\n        const { login, senha } = this.state;\n        if (!login || !senha) {\n            this.setState({ error: \"Preencha e-mail e senha para continuar!\" });\n        } else {\n            try {\n                //console.log(\"---\" + login + \" \" + senha);\n                const token = await AuthDataService.autenticar(login, senha);//await api.post(\"/sessions\", { email, password });\n                doLogin(token);\n                //login(response.data.valor);\n                //this.props.history.push(\"/app\");\n            } catch (err) {\n                this.setState({\n                    error:\n                        \"Houve um problema com o login, verifique suas credenciais. T.T\"\n                });\n                console.log(err);\n            }\n        }\n    };\n    render() {\n        return (\n            <div className=\"card flex justify-content-center\">\n                <Card title=\"Login\">\n                    <form className=\"flex flex-column gap-2\" onSubmit={this.handleSignIn}>\n                        <span className=\"p-float-label\">\n                            <InputText id=\"login\" onChange={e => this.setState({ login: e.target.value })}/>\n                            <label htmlFor=\"login\">Usu√°rio</label>\n                        </span>\n                        <span className=\"p-float-label\">\n                            <Password id=\"senha\" onChange={e => this.setState({ senha: e.target.value })}/>\n                            <label htmlFor=\"senha\">Senha</label>\n                        </span>\n                        <span>\n                            <button type=\"submit\">Entrar</button>\n                        </span>\n\n                    </form>\n                </Card>\n            </div>\n        )\n    }\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}